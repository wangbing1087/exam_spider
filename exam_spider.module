<?php

/**
 * @file
 * Exam spider module file.
 */

use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Url;

/**
 * Define Exam variable for Exam title and Path.
 */
define('EXAM_SPIDER_EXAM_TITLE', \Drupal::config('exam_spider.settings')->get('exam_spider_exam_name'));
define('EXAM_SPIDER_EXAM_URL', \Drupal::config('exam_spider.settings')->get('exam_spider_exam_url'));

/**
 * Implements hook_help().
 */
function exam_spider_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.exam_spider':
      $output = '';
      $output .= '<h3>' . t('Exam Spider') . '</h3>';
      $output .= '<p>' . t('Exam spider module provides online exam or quiz with single and multiple answers for a question as well as you can enable/disable time limit, negative marking, Display Random Question,Exam Published or unpublished. Easily set re attempt exam time in days, User can reattempt exam after specified time period for specific exam.') . '</p>';
      $output .= '<p>' . t('<a href=@exam_spider_listof_exams>View List of exams</a>.', ['@exam_spider_listof_exams' => \Drupal::url('exam_spider.exam_spider_dashboard')]) . '</p>';
      return $output;
  }
}

/**
 * Implements hook_mail().
 */
function exam_spider_mail($key, &$message, $params) {
  $options = [
    'langcode' => $message['langcode'],
  ];
  switch ($key) {
    case 'exam_spider_result':
      $message['from'] = \Drupal::config('system.site')->get('mail');
      $message['subject'] = t('@subject', ['@subject' => $params['subject']], $options);
      $message['body'][] = $params['message'];
      break;
  }
}
